From 7b72001f9bd47cb1190617a72ee35017b923ada4 Mon Sep 17 00:00:00 2001
From: Ho Cheung <uioptt24@gmail.com>
Date: Mon, 4 Sep 2023 20:56:29 +0800
Subject: [PATCH] [Android] Remove discovery module from NTP

---
 .../java/res/layout/new_tab_page_feed_v2_expandable_header.xml | 3 ++-
 .../android/java/res/layout/new_tab_page_multi_feed_header.xml | 3 ++-
 components/feed/core/shared_prefs/pref_names.cc                | 2 +-
 3 files changed, 5 insertions(+), 3 deletions(-)

diff --git a/chrome/browser/feed/android/java/res/layout/new_tab_page_feed_v2_expandable_header.xml b/chrome/browser/feed/android/java/res/layout/new_tab_page_feed_v2_expandable_header.xml
index ee1283cb9a6a0..01cf8d4ef4e7e 100644
--- a/chrome/browser/feed/android/java/res/layout/new_tab_page_feed_v2_expandable_header.xml
+++ b/chrome/browser/feed/android/java/res/layout/new_tab_page_feed_v2_expandable_header.xml
@@ -14,7 +14,8 @@ found in the LICENSE file.
     android:minHeight="@dimen/snippets_article_header_height"
     android:orientation="vertical"
     android:gravity="center_vertical"
-    android:layoutDirection="locale" >
+    android:layoutDirection="locale"
+    android:visibility="gone" >
 
     <RelativeLayout
         tools:ignore="RelativeOverlap"
diff --git a/chrome/browser/feed/android/java/res/layout/new_tab_page_multi_feed_header.xml b/chrome/browser/feed/android/java/res/layout/new_tab_page_multi_feed_header.xml
index 483e954de0a49..8a68a7b230cbf 100644
--- a/chrome/browser/feed/android/java/res/layout/new_tab_page_multi_feed_header.xml
+++ b/chrome/browser/feed/android/java/res/layout/new_tab_page_multi_feed_header.xml
@@ -11,7 +11,8 @@ found in the LICENSE file.
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
-    android:orientation="vertical" >
+    android:orientation="vertical"
+    android:visibility="gone" >
 
   <LinearLayout
       android:id="@+id/main_content"
diff --git a/components/feed/core/shared_prefs/pref_names.cc b/components/feed/core/shared_prefs/pref_names.cc
index 71586a65fcd92..3455a46cb886e 100644
--- a/components/feed/core/shared_prefs/pref_names.cc
+++ b/components/feed/core/shared_prefs/pref_names.cc
@@ -20,7 +20,7 @@ const char kArticlesListVisible[] = "ntp_snippets.list_visible";
 
 void RegisterFeedSharedProfilePrefs(PrefRegistrySimple* registry) {
   registry->RegisterBooleanPref(kEnableSnippets, true);
-  registry->RegisterBooleanPref(kArticlesListVisible, true);
+  registry->RegisterBooleanPref(kArticlesListVisible, false);
 }
 
 }  // namespace prefs
-- 
2.42.0.windows.1

